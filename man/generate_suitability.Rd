% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generate_suitability.R
\name{generate_suitability}
\alias{generate_suitability}
\title{Generate a Geographic Suitability Map}
\usage{
generate_suitability(env_rasters, niche, output_type = "binary")
}
\arguments{
\item{env_rasters}{A `SpatRaster` object from the `terra` package. Each layer
represents an environmental variable. Layer names must match the variable
names used to define the niche.}

\item{niche}{An `ellipsoid` object created by `build_ellipsoid()`. The
`center` vector within this object **must be named** (e.g., `center = c(temp = 15, precip = 1200)`).}

\item{output_type}{Character string specifying the output format. Can be:
- `"binary"` (default): Returns 1 for suitable (inside the niche) and 0 for unsuitable.
- `"probabilistic"`: Returns continuous suitability from 0 to 1 based on a Gaussian decay function from the niche center.
- `"distance"`: Returns the raw Mahalanobis distance from the niche center.}
}
\value{
A `SpatRaster` object representing the geographic map of suitability.
}
\description{
Projects an ellipsoidal niche onto a set of environmental raster layers
to create a geographic map of habitat suitability.
}
\examples{
library(terra)

# 1. Create a dummy environmental raster stack for demonstration
r <- rast(xmin=-180, xmax=180, ymin=-90, ymax=90, res=10, crs="WGS84")
temp <- init(r, fun=\(x) 15 + 15 * sin(pi * yFromCell(r, x) / 180))
precip <- init(r, fun=\(x) 1000 - 500 * sin(pi * yFromCell(r, x) / 180))
names(temp) <- "AnnualTemp"
names(precip) <- "AnnualPrecip"
env_stack <- c(temp, precip)

# 2. Define a niche with *named* variables
# (Requires the `build_ellipsoid` function from the previous response)
sp_niche <- build_ellipsoid(
  center = c(AnnualTemp = 25, AnnualPrecip = 600),
  axes = c(5, 200)
)

# 3. Generate a binary suitability map
suit_map_binary <- generate_suitability(env_stack, sp_niche)

# 4. Generate a probabilistic suitability map
suit_map_prob <- generate_suitability(env_stack, sp_niche, output_type = "probabilistic")

# 5. Plot the results to compare
par(mfrow = c(1, 2))
plot(suit_map_binary, main = "Binary Suitability (Present/Absent)", col = c("grey90", "darkgreen"))
plot(suit_map_prob, main = "Probabilistic Suitability", col = hcl.colors(100, "Lajolla"))
}
\seealso{
Other ellipsoid functions: 
\code{\link{build_ellipsoid}()},
\code{\link{plot_niche_3d}()},
\code{\link{points_in_ellipsoid}()}
}
\concept{ellipsoid functions}
